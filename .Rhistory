View(state_crosswalk)
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop = b01003_001e, black_pop = b02001_003e) %>%
mutate(pct_black = round(black_pop/total_pop*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
select(name, total_pop, black_pop, pct_black, deep_south) %>%
arrange(desc(pct_black)) %>%
mutate(state_name_caps = str_to_upper(name))
select(state_name_caps, total_pop, black_pop, pct_black, deep_south) %>%
arrange(desc(pct_black)) %>%
# DEEP SOUTH SUMMARY
race_analysis_deep_south <- bind_rows(race_analysis_al, race_analysis_ga, race_analysis_fl, race_analysis_la, race_analysis_ms, race_analysis_sc, race_analysis_tx) %>%
group_by(black_pop_vs_state) %>%
summarize(
towns = sum(total_towns),
total_pop = sum(sum_total_pop),
total_players = sum(sum_total_players)
) %>%
mutate(pct_players = round((total_players / sum(total_players)) * 100, 1)) %>%
mutate(players_per_hundred_thousand = round((total_players*1000000)/total_pop,1))
select(state_name_caps, total_pop, black_pop, pct_black, deep_south) %>%
arrange(desc(pct_black))
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop = b01003_001e, black_pop = b02001_003e) %>%
mutate(pct_black = round(black_pop/total_pop*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
select(state_name_caps, total_pop, black_pop, pct_black, deep_south) %>%
arrange(desc(pct_black))
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop = b01003_001e, black_pop = b02001_003e) %>%
mutate(pct_black = round(black_pop/total_pop*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
select(state_name_caps, total_pop, black_pop, pct_black, deep_south) %>%
mutate(state_name_caps = case_when(
state_name_caps == "DISTRICT OF COLUMBIA" ~ "WASHINGTON, DC",
TRUE ~ state_name_caps))
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop = b01003_001e, black_pop = b02001_003e) %>%
mutate(pct_black = round(black_pop/total_pop*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
select(state_name_caps, total_pop, black_pop, pct_black, deep_south) %>%
mutate(state_name_caps = case_when(
state_name_caps == "DISTRICT OF COLUMBIA" ~ "WASHINGTON, DC",
TRUE ~ state_name_caps)) %>%
arrange(desc(pct_black))
black_pop_usa_2021 <- black_pop_usa_2021 %>%
left_join(state_crosswalk, by = "state_name_caps")
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop = b01003_001e, black_pop = b02001_003e) %>%
mutate(pct_black = round(black_pop/total_pop*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
select(state_name_caps, total_pop, black_pop, pct_black, deep_south) %>%
mutate(state_name_caps = case_when(
state_name_caps == "DISTRICT OF COLUMBIA" ~ "WASHINGTON, DC",
TRUE ~ state_name_caps)) %>%
arrange(desc(pct_black)) %>%
left_join(state_crosswalk, by = "state_name_caps")
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop = b01003_001e, black_pop = b02001_003e) %>%
mutate(pct_black = round(black_pop/total_pop*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
mutate(state_name_caps = case_when(
state_name_caps == "DISTRICT OF COLUMBIA" ~ "WASHINGTON, DC",
TRUE ~ state_name_caps)) %>%
arrange(desc(pct_black)) %>%
left_join(state_crosswalk, by = "state_name_caps")
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop = b01003_001e, black_pop = b02001_003e) %>%
mutate(pct_black = round(black_pop/total_pop*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
mutate(state_name_caps = case_when(
state_name_caps == "DISTRICT OF COLUMBIA" ~ "WASHINGTON, DC",
TRUE ~ state_name_caps)) %>%
left_join(state_crosswalk, by = "state_name_caps") %>%
select(state_abb, pct_black, deep_south) %>%
arrange(desc(pct_black))
hometowns_complete_with_race <- read_csv("hometowns_complete.csv")
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop = b01003_001e, black_pop = b02001_003e) %>%
mutate(pct_black = round(black_pop/total_pop*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
mutate(state_name_caps = case_when(
state_name_caps == "DISTRICT OF COLUMBIA" ~ "WASHINGTON, DC",
TRUE ~ state_name_caps)) %>%
left_join(state_crosswalk, by = "state_name_caps") %>%
select(state_abb, pct_black, deep_south) %>%
arrange(desc(pct_black))
View(hometowns_complete_with_race)
# Join Black pop to hometowns
hometowns_complete_with_race <- hometowns_complete_with_race %>%
left_join(black_pop_usa_2021, by = c("hometown_state_clean" = "state_abb"))
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop_state = b01003_001e, black_pop_state = b02001_003e) %>%
mutate(pct_black_state = round(black_pop_state/total_pop_state*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
mutate(state_name_caps = case_when(
state_name_caps == "DISTRICT OF COLUMBIA" ~ "WASHINGTON, DC",
TRUE ~ state_name_caps)) %>%
left_join(state_crosswalk, by = "state_name_caps") %>%
select(state_abb, pct_black_state, deep_south) %>%
arrange(desc(pct_black_state))
hometowns_complete_with_race <- read_csv("hometowns_complete.csv")
# State-by-state Black pop
black_pop_usa_2021 <- get_acs(geography = "state",
variables = c("B01003_001", "B02001_003"),
year = 2021,
output = "wide") %>%
clean_names() %>%
rename(total_pop_state = b01003_001e, black_pop_state = b02001_003e) %>%
mutate(pct_black_state = round(black_pop_state/total_pop_state*100, 1)) %>%
mutate(deep_south = if_else(
name == "Louisiana" | name == "Mississippi" | name == "Alabama" | name == "Georgia" | name == "South Carolina" , "yes", "no")) %>%
mutate(state_name_caps = str_to_upper(name)) %>%
mutate(state_name_caps = case_when(
state_name_caps == "DISTRICT OF COLUMBIA" ~ "WASHINGTON, DC",
TRUE ~ state_name_caps)) %>%
left_join(state_crosswalk, by = "state_name_caps") %>%
select(state_abb, pct_black_state, deep_south) %>%
arrange(desc(pct_black_state))
# Join Black pop to hometowns
hometowns_complete_with_race <- hometowns_complete_with_race %>%
left_join(black_pop_usa_2021, by = c("hometown_state_clean" = "state_abb"))
# Join Black pop to hometowns
hometowns_complete_with_race <- hometowns_complete_with_race %>%
left_join(black_pop_usa_2021, by = c("hometown_state_clean" = "state_abb")) %>%
mutate(black_pop_vs_state = if_else(
pct_black > pct_black_state, "above", "below or equal"))
# Add in some columns for analysis
hometowns_complete_with_race <- hometowns_complete_with_race %>%
mutate(black_pop_vs_state = if_else(
pct_black > pct_black_state, "above", "below or equal"))
# Add in some columns for analysis
hometowns_complete_with_race <- hometowns_complete_with_race %>%
mutate(black_pop_vs_state = if_else(
pct_black > pct_black_state, "above", "below or equal")) %>%
mutate(majority_black = if_else(
pct_black > 50, "yes", "no"))
# Add in some columns for analysis
hometowns_complete_with_race <- hometowns_complete_with_race %>%
mutate(black_pop_vs_state = if_else(
pct_black > pct_black_state, "above", "below or equal")) %>%
mutate(majority_black = if_else(
pct_black > 50, "yes", "no")) %>%
arrange(hometown_city_clean)
# How do towns with Black pop above state average compare to towns with Black pop below state average?
race_analysis_vs_state <- hometowns_complete_with_race %>%
group_by(black_pop_vs_state) %>%
summarise(
sum_total_towns = n(),
sum_total_pop = sum(total_pop),
sum_total_players = sum(total_players))
View(race_analysis_vs_state)
# How do towns with Black pop above state average compare to towns with Black pop below state average?
race_analysis_vs_state <- hometowns_complete_with_race %>%
group_by(black_pop_vs_state) %>%
summarise(
sum_total_towns = n(),
sum_total_pop = sum(total_pop),
sum_total_players = sum(total_players)) %>%
mutate(pct_players = round((total_players / sum(total_players)) * 100, 1)) %>%
mutate(players_per_hundred_thousand = round((total_players*1000000)/total_pop,1))
# How do towns with Black pop above state average compare to towns with Black pop below state average?
race_analysis_vs_state <- hometowns_complete_with_race %>%
group_by(black_pop_vs_state) %>%
summarise(
sum_total_towns = n(),
sum_total_pop = sum(total_pop),
sum_total_players = sum(total_players)) %>%
mutate(pct_players = round((sum_total_players / sum(sum_total_players)) * 100, 1)) %>%
mutate(players_per_hundred_thousand = round((sum_total_players*1000000)/sum_total_pop,1))
write_csv(race_analysis_vs_state, file = "race_analysis_vs_state.csv")
# How do majority Black towns compare to minority Black towns?
race_analysis_majority_black <- hometowns_complete_with_race %>%
group_by(majority_black) %>%
summarise(
sum_total_towns = n(),
sum_total_pop = sum(total_pop),
sum_total_players = sum(total_players)) %>%
mutate(pct_players = round((sum_total_players / sum(sum_total_players)) * 100, 1)) %>%
mutate(players_per_hundred_thousand = round((sum_total_players*1000000)/sum_total_pop,1))
View(race_analysis_majority_black)
# How do majority Black towns compare to minority Black towns?
race_analysis_majority_black <- hometowns_complete_with_race %>%
group_by(majority_black) %>%
summarise(
sum_total_towns = n(),
sum_total_pop = sum(total_pop),
sum_total_players = sum(total_players)) %>%
mutate(pct_players = round((sum_total_players / sum(sum_total_players)) * 100, 1)) %>%
mutate(players_per_hundred_thousand = round((sum_total_players*1000000)/sum_total_pop,1)) %>%
arrange(desc(majority_black))
write_csv(race_analysis_majority_black, file = "race_analysis_majority_black.csv")
# How does all this look in the Deep South?
race_analysis_vs_state_deep_south <- hometowns_complete_with_race %>%
filter(deep_south == "yes") %>%
group_by(black_pop_vs_state) %>%
summarise(
sum_total_towns = n(),
sum_total_pop = sum(total_pop),
sum_total_players = sum(total_players)) %>%
mutate(pct_players = round((sum_total_players / sum(sum_total_players)) * 100, 1)) %>%
mutate(players_per_hundred_thousand = round((sum_total_players*1000000)/sum_total_pop,1))
View(race_analysis_vs_state_deep_south)
race_analysis_majority_black_deep_south <- hometowns_complete_with_race %>%
filter(deep_south == "yes") %>%
group_by(majority_black) %>%
summarise(
sum_total_towns = n(),
sum_total_pop = sum(total_pop),
sum_total_players = sum(total_players)) %>%
mutate(pct_players = round((sum_total_players / sum(sum_total_players)) * 100, 1)) %>%
mutate(players_per_hundred_thousand = round((sum_total_players*1000000)/sum_total_pop,1)) %>%
arrange(desc(majority_black))
View(race_analysis_majority_black_deep_south)
write_csv(race_analysis_vs_state_deep_south, file = "race_analysis_vs_state_deep_south.csv")
write_csv(race_analysis_majority_black_deep_south, file = "race_analysis_majority_black_deep_south.csv")
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021)
View(holmes_poverty_2021)
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = wide)
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide")
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names()
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e)
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e) %>%
mutate(poverty_rate = poverty_below_e/poverty_total_e*100)
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e) %>%
mutate(poverty_rate = round(poverty_below_e/poverty_total_e*100),1)
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e) %>%
mutate(poverty_rate = round(poverty_below_e/poverty_total_e*100),1))
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e) %>%
mutate(poverty_rate = round(poverty_below_e / poverty_total_e * 100, 1))
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e) %>%
mutate(poverty_rate = round(poverty_below_e/poverty_total_e*100, 1)) %>%
arrange(desc(poverty_rate))
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e) %>%
separate(name, into = c("county", "state"), sep = ", ") %>%
mutate(poverty_rate = round(poverty_below_e/poverty_total_e*100, 1)) %>%
arrange(desc(poverty_rate))
# Holmes County poverty relative to nation
holmes_poverty_2021 <- get_acs(geography = "county",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e) %>%
separate(name, into = c("county", "state"), sep = ", ") %>%
filter(state != "Puerto Rico") %>%
mutate(poverty_rate = round(poverty_below_e/poverty_total_e*100, 1)) %>%
arrange(desc(poverty_rate))
state_poverty_2021 <- get_acs(geography = "state",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e)
View(state_poverty_2021)
# National poverty rates by state
# Finding:
state_poverty_2021 <- get_acs(geography = "state",
variables = c(poverty_total = "B17020_001",
poverty_below = "B17020_002",
poverty_above = "B17020_010"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, poverty_total_e, poverty_below_e) %>%
filter(name != "Puerto Rico") %>%
mutate(poverty_rate = round(poverty_below_e/poverty_total_e*100, 1)) %>%
arrange(desc(poverty_rate))
View(acs_2021)
county_public_assistance_2021 <- get_acs(geography = "county",
variables = c(public_assistance_total = "B22003_001",
public_assistance_received = "B22003_002",
public_assistance_not_received = "B22003_005"),
year = 2021,
output = "wide") %>%
clean_names()
View(county_public_assistance_2021)
# National public assistance rates by county
# Finding:
county_public_assistance_2021 <- get_acs(geography = "county",
variables = c(public_assistance_total = "B22003_001",
public_assistance_received = "B22003_002",
public_assistance_not_received = "B22003_005"),
year = 2021,
output = "wide") %>%
clean_names() %>%
select(geoid, name, public_assistance_total_e, public_assistance_received_e) %>%
separate(name, into = c("county", "state"), sep = ", ") %>%
filter(state != "Puerto Rico") %>%
mutate(public_assistance_rate = round(public_assistance_received_e/public_assistance_total_e*100, 1)) %>%
arrange(desc(public_assistance_rate))
# National public assistance rates by county
# Finding:
county_public_assistance_2021 <- get_acs(geography = "county",
variables = c(public_assistance_total = "B22003_001",
public_assistance_received = "B22003_002",
public_assistance_not_received = "B22003_005"),
year = 2021,
state = "MS",
output = "wide") %>%
clean_names() %>%
select(geoid, name, public_assistance_total_e, public_assistance_received_e) %>%
separate(name, into = c("county", "state"), sep = ", ") %>%
mutate(public_assistance_rate = round(public_assistance_received_e/public_assistance_total_e*100, 1)) %>%
arrange(desc(public_assistance_rate))
# National public assistance rates by county
# Finding:
county_public_assistance_2021 <- get_acs(geography = "county",
variables = c(public_assistance_total = "B22003_001",
public_assistance_received = "B22003_002",
public_assistance_not_received = "B22003_005"),
year = 2021,
state = "MS",
output = "wide") %>%
clean_names() %>%
select(geoid, name, public_assistance_total_e, public_assistance_received_e) %>%
mutate(public_assistance_rate = round(public_assistance_received_e/public_assistance_total_e*100, 1)) %>%
arrange(desc(public_assistance_rate))
county_public_assistance_2021 <- get_acs(geography = "county",
variables = c(public_assistance_total = "B22003_001",
public_assistance_received = "B22003_002",
public_assistance_not_received = "B22003_005"),
year = 2021,
state = "MS",
county = "Holmes County",
output = "wide")
# National public assistance rates by county
# Finding:
county_public_assistance_2021 <- get_acs(geography = "county",
variables = c(public_assistance_total = "B22003_001",
public_assistance_received = "B22003_002",
public_assistance_not_received = "B22003_005"),
year = 2021,
state = "MS",
county = "Holmes County",
output = "wide") %>%
clean_names() %>%
select(geoid, name, public_assistance_total_e, public_assistance_received_e) %>%
mutate(public_assistance_rate = round(public_assistance_received_e/public_assistance_total_e*100, 1))
# National public assistance rates by county
# Finding:
holmes_public_assistance_2021 <- get_acs(geography = "county",
variables = c(public_assistance_total = "B22003_001",
public_assistance_received = "B22003_002",
public_assistance_not_received = "B22003_005"),
year = 2021,
state = "MS",
county = "Holmes County",
output = "wide") %>%
clean_names() %>%
select(geoid, name, public_assistance_total_e, public_assistance_received_e) %>%
mutate(public_assistance_rate = round(public_assistance_received_e/public_assistance_total_e*100, 1))
View(holmes_public_assistance_2021)
ms_public_assistance_2021 <- get_acs(geography = "state",
variables = c(public_assistance_total = "B22003_001",
public_assistance_received = "B22003_002",
public_assistance_not_received = "B22003_005"),
year = 2021,
state = "MS",
output = "wide") %>%
clean_names() %>%
select(geoid, name, public_assistance_total_e, public_assistance_received_e) %>%
mutate(public_assistance_rate = round(public_assistance_received_e/public_assistance_total_e*100, 1))
View(ms_public_assistance_2021)
public_assistance_2021 <- bind_rows(holmes_public_assistance_2021, ms_public_assistance_2021)
View(public_assistance_2021)
