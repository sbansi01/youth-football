group_by(hometown_city_clean, hometown_state_clean) %>%
summarise(total_players = n())
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "GA")
city_pops_al_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "AL")
city_pops_ms_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "MS")
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
city_pops_se_2021 <- city_pops_se_2021 %>%
rename(population = estimate)
ellenwood_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", population = 41037) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
highland_pop_2021 <- data.frame(city = "Highland Home", state = "AL", population = 1423) #obtained using zip code from https://censusreporter.org/profiles/86000US36041-36041/
nesbit_pop_2021 <- data.frame(city = "Nesbit", state = "MS", population = 8906) #obtained using zip code from https://censusreporter.org/profiles/86000US38651-38651/
rabun_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", population = 1948) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_pop_2021 <- data.frame(city = "Rex", state = "GA", population = 17522) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_pop_2021 <- data.frame(city = "Subligna", state = "GA", population = 1538) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
friendship_pop_2021 <- data.frame(city = "Friendship", state = "MS", population = 2430) #obtained using population of nearby Collins, MS, where the player went to HS https://censusreporter.org/profiles/16000US2815140-collins-ms/
watson_pop_2021 <- data.frame(city = "Watson", state = "AL", population = 1252) #obtained using population of nearby Brookside, AL, which seems to include Watson https://censusreporter.org/profiles/16000US0109736-brookside-al/
city_pops_se_2021 <- bind_rows(city_pops_se_2021, ellenwood_pop_2021, highland_pop_2021, nesbit_pop_2021, rabun_pop_2021, rex_pop_2021, sublinga_pop_2021, friendship_pop_2021, watson_pop_2021)
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
# CSV
#write_csv(hometowns_se_complete, file = "hometowns_se.csv")
hometowns_se_complete %>%
filter(is.na(population))
# CSV
write_csv(hometowns_se_complete, file = "hometowns_se.csv")
hometowns_se_complete %>%
filter(is.na(population))
View(hometowns_se_complete)
# CSV
write_csv(hometowns_se_complete, file = "hometowns_se.csv")
View(distinct_hometowns_se)
View(football_rosters_usa)
View(city_pops_se_2021)
View(distinct_hometowns_se)
View(hometowns_se_complete)
View(city_pops_al_2021)
city_pops_al_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "AL")
View(city_pops_al_2021)
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "GA")
View(city_pops_ga_2021)
city_pops_ms_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "MS")
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
View(city_pops_se_2021)
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate, geometry) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
city_pops_se_2021 <- city_pops_se_2021 %>%
rename(population = estimate)
ellenwood_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", population = 41037) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
highland_pop_2021 <- data.frame(city = "Highland Home", state = "AL", population = 1423) #obtained using zip code from https://censusreporter.org/profiles/86000US36041-36041/
nesbit_pop_2021 <- data.frame(city = "Nesbit", state = "MS", population = 8906) #obtained using zip code from https://censusreporter.org/profiles/86000US38651-38651/
rabun_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", population = 1948) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_pop_2021 <- data.frame(city = "Rex", state = "GA", population = 17522) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_pop_2021 <- data.frame(city = "Subligna", state = "GA", population = 1538) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
friendship_pop_2021 <- data.frame(city = "Friendship", state = "MS", population = 2430) #obtained using population of nearby Collins, MS, where the player went to HS https://censusreporter.org/profiles/16000US2815140-collins-ms/
watson_pop_2021 <- data.frame(city = "Watson", state = "AL", population = 1252) #obtained using population of nearby Brookside, AL, which seems to include Watson https://censusreporter.org/profiles/16000US0109736-brookside-al/
city_pops_se_2021 <- bind_rows(city_pops_se_2021, ellenwood_pop_2021, highland_pop_2021, nesbit_pop_2021, rabun_pop_2021, rex_pop_2021, sublinga_pop_2021, friendship_pop_2021, watson_pop_2021)
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
View(hometowns_se_complete)
#Trying some viz
hometowns_se_complete %>%
ggplot(aes(fill = players_per_hundred_thousand)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "GA")
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "GA")
city_pops_al_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "AL")
city_pops_ms_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "MS")
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate, geometry) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
city_pops_se_2021 <- city_pops_se_2021 %>%
rename(population = estimate)
ellenwood_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", population = 41037) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
highland_pop_2021 <- data.frame(city = "Highland Home", state = "AL", population = 1423) #obtained using zip code from https://censusreporter.org/profiles/86000US36041-36041/
nesbit_pop_2021 <- data.frame(city = "Nesbit", state = "MS", population = 8906) #obtained using zip code from https://censusreporter.org/profiles/86000US38651-38651/
rabun_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", population = 1948) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_pop_2021 <- data.frame(city = "Rex", state = "GA", population = 17522) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_pop_2021 <- data.frame(city = "Subligna", state = "GA", population = 1538) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
friendship_pop_2021 <- data.frame(city = "Friendship", state = "MS", population = 2430) #obtained using population of nearby Collins, MS, where the player went to HS https://censusreporter.org/profiles/16000US2815140-collins-ms/
watson_pop_2021 <- data.frame(city = "Watson", state = "AL", population = 1252) #obtained using population of nearby Brookside, AL, which seems to include Watson https://censusreporter.org/profiles/16000US0109736-brookside-al/
city_pops_se_2021 <- bind_rows(city_pops_se_2021, ellenwood_pop_2021, highland_pop_2021, nesbit_pop_2021, rabun_pop_2021, rex_pop_2021, sublinga_pop_2021, friendship_pop_2021, watson_pop_2021)
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "GA")
city_pops_al_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "AL")
city_pops_ms_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "MS")
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate, geometry) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
city_pops_se_2021 <- city_pops_se_2021 %>%
rename(population = estimate)
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
#Trying some viz
hometowns_se_complete_remove_na <- hometowns_se_complete %>%
filter(!is.na(population))
hometowns_se_complete_remove_na %>%
ggplot(aes(fill = players_per_hundred_thousand)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
orange <- get_acs(
state = "CA",
county = "Orange",
geography = "tract",
variables = "B19013_001",
geometry = TRUE,
year = 2020
)
View(orange)
orange %>%
ggplot(aes(fill = estimate)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "GA")
city_pops_al_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "AL")
city_pops_ms_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "MS")
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
#select(city, state, estimate, geometry) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
View(city_pops_se_2021)
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
#select(city, state, estimate, geometry) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/estimate,1)) %>%
arrange(desc(players_per_hundred_thousand))
View(hometowns_se_complete)
#Trying some viz
hometowns_se_complete_remove_na <- hometowns_se_complete %>%
filter(!is.na(population))
#Trying some viz
hometowns_se_complete_remove_na <- hometowns_se_complete %>%
filter(!is.na(estimate))
hometowns_se_complete_remove_na %>%
ggplot(aes(fill = estimate)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
# SOUTHEAST
#Let's start working on a few states that will likely be consequential for this project: GA, AL, MS
football_rosters_se <- football_rosters_usa %>%
filter(hometown_state_clean == "GA" | hometown_state_clean == "AL" | hometown_state_clean == "MS")
distinct_hometowns_se <- football_rosters_se %>%
group_by(hometown_city_clean, hometown_state_clean) %>%
summarise(total_players = n())
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "GA")
city_pops_al_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "AL")
city_pops_ms_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "MS")
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
#select(city, state, estimate, geometry) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
city_pops_se_2021 <- city_pops_se_2021 %>%
rename(population = estimate)
ellenwood_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", population = 41037) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
highland_pop_2021 <- data.frame(city = "Highland Home", state = "AL", population = 1423) #obtained using zip code from https://censusreporter.org/profiles/86000US36041-36041/
nesbit_pop_2021 <- data.frame(city = "Nesbit", state = "MS", population = 8906) #obtained using zip code from https://censusreporter.org/profiles/86000US38651-38651/
rabun_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", population = 1948) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_pop_2021 <- data.frame(city = "Rex", state = "GA", population = 17522) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_pop_2021 <- data.frame(city = "Subligna", state = "GA", population = 1538) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
friendship_pop_2021 <- data.frame(city = "Friendship", state = "MS", population = 2430) #obtained using population of nearby Collins, MS, where the player went to HS https://censusreporter.org/profiles/16000US2815140-collins-ms/
watson_pop_2021 <- data.frame(city = "Watson", state = "AL", population = 1252) #obtained using population of nearby Brookside, AL, which seems to include Watson https://censusreporter.org/profiles/16000US0109736-brookside-al/
city_pops_se_2021 <- bind_rows(city_pops_se_2021, ellenwood_pop_2021, highland_pop_2021, nesbit_pop_2021, rabun_pop_2021, rex_pop_2021, sublinga_pop_2021, friendship_pop_2021, watson_pop_2021)
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/estimate,1)) %>%
arrange(desc(players_per_hundred_thousand))
# SOUTHEAST
#Let's start working on a few states that will likely be consequential for this project: GA, AL, MS
football_rosters_se <- football_rosters_usa %>%
filter(hometown_state_clean == "GA" | hometown_state_clean == "AL" | hometown_state_clean == "MS")
distinct_hometowns_se <- football_rosters_se %>%
group_by(hometown_city_clean, hometown_state_clean) %>%
summarise(total_players = n())
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "GA")
city_pops_al_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "AL")
city_pops_ms_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "MS")
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
city_pops_se_2021 <- city_pops_se_2021 %>%
rename(population = estimate)
ellenwood_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", population = 41037) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
highland_pop_2021 <- data.frame(city = "Highland Home", state = "AL", population = 1423) #obtained using zip code from https://censusreporter.org/profiles/86000US36041-36041/
nesbit_pop_2021 <- data.frame(city = "Nesbit", state = "MS", population = 8906) #obtained using zip code from https://censusreporter.org/profiles/86000US38651-38651/
rabun_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", population = 1948) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_pop_2021 <- data.frame(city = "Rex", state = "GA", population = 17522) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_pop_2021 <- data.frame(city = "Subligna", state = "GA", population = 1538) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
friendship_pop_2021 <- data.frame(city = "Friendship", state = "MS", population = 2430) #obtained using population of nearby Collins, MS, where the player went to HS https://censusreporter.org/profiles/16000US2815140-collins-ms/
watson_pop_2021 <- data.frame(city = "Watson", state = "AL", population = 1252) #obtained using population of nearby Brookside, AL, which seems to include Watson https://censusreporter.org/profiles/16000US0109736-brookside-al/
city_pops_se_2021 <- bind_rows(city_pops_se_2021, ellenwood_pop_2021, highland_pop_2021, nesbit_pop_2021, rabun_pop_2021, rex_pop_2021, sublinga_pop_2021, friendship_pop_2021, watson_pop_2021)
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
# CSV
#write_csv(hometowns_se_complete, file = "hometowns_se.csv")
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
geometry = TRUE,
state = "GA")
View(city_pops_ga_2021)
es
plot(city_pops_ga_2021["estimate"])
View(city_pops_ms_2021)
View(city_pops_al_2021)
#Let's start working on a few states that will likely be consequential for this project: GA, AL, MS
football_rosters_se <- football_rosters_usa %>%
filter(hometown_state_clean == "GA" | hometown_state_clean == "AL" | hometown_state_clean == "MS")
distinct_hometowns_se <- football_rosters_se %>%
group_by(hometown_city_clean, hometown_state_clean) %>%
summarise(total_players = n())
#Let's see if we can grab the populations of every city in GA, AL, and MS
city_pops_ga_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "GA")
city_pops_al_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "AL")
city_pops_ms_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "MS")
city_pops_se_2021 <- bind_rows(city_pops_ga_2021, city_pops_al_2021, city_pops_ms_2021) %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_se_2021 <- city_pops_se_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA",
state == 'Alabama' ~ "AL",
state == 'Mississippi' ~ "MS"
)) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
View(city_pops_se_2021)
city_pops_se_2021 <- city_pops_se_2021 %>%
rename(population = estimate)
ellenwood_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", population = 41037) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
highland_pop_2021 <- data.frame(city = "Highland Home", state = "AL", population = 1423) #obtained using zip code from https://censusreporter.org/profiles/86000US36041-36041/
nesbit_pop_2021 <- data.frame(city = "Nesbit", state = "MS", population = 8906) #obtained using zip code from https://censusreporter.org/profiles/86000US38651-38651/
rabun_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", population = 1948) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_pop_2021 <- data.frame(city = "Rex", state = "GA", population = 17522) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_pop_2021 <- data.frame(city = "Subligna", state = "GA", population = 1538) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
friendship_pop_2021 <- data.frame(city = "Friendship", state = "MS", population = 2430) #obtained using population of nearby Collins, MS, where the player went to HS https://censusreporter.org/profiles/16000US2815140-collins-ms/
watson_pop_2021 <- data.frame(city = "Watson", state = "AL", population = 1252) #obtained using population of nearby Brookside, AL, which seems to include Watson https://censusreporter.org/profiles/16000US0109736-brookside-al/
city_pops_se_2021 <- bind_rows(city_pops_se_2021, ellenwood_pop_2021, highland_pop_2021, nesbit_pop_2021, rabun_pop_2021, rex_pop_2021, sublinga_pop_2021, friendship_pop_2021, watson_pop_2021)
#Join
hometowns_se_complete <- distinct_hometowns_se %>%
left_join(city_pops_se_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
View(hometowns_se_complete)
View(football_rosters_usa)
