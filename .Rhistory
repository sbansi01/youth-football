) #population of Vacherie obtained by summing North and South Vacherie, per https://en.wikipedia.org/wiki/Vacherie,_Louisiana
city_pops_la_2021 <- bind_rows(city_pops_la_2021, geismar_pop_2021, st_amant_pop_2021, vacherie_pop_2021)
#Join
hometowns_la_complete <- distinct_hometowns_la %>%
left_join(city_pops_la_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
#Add to SE
hometowns_se_complete <- bind_rows(hometowns_se_complete, hometowns_la_complete) %>%
arrange(desc(players_per_hundred_thousand))
#Find and fix NA values
#hometowns_la_complete %>%
#filter(is.na(population))
# CSV
#write_csv(hometowns_se_complete, file = "hometowns_se.csv")
# TEXAS
#Let's keep going: TX
football_rosters_tx <- football_rosters_usa %>%
filter(hometown_state_clean == "TX")
distinct_hometowns_tx <- football_rosters_tx %>%
group_by(hometown_city_clean, hometown_state_clean) %>%
summarise(total_players = n())
#Let's see if we can grab the populations of every city in TX
city_pops_tx_2021 <- get_acs(geography = "place",
variables = "B01003_001",
year = 2021,
state = "TX") %>%
clean_names()
#Now let's see if we can modify this city_pops dataframe to prepare it for a join with our roster data
city_pops_tx_2021 <- city_pops_tx_2021 %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Texas' ~ "TX")) %>%
mutate(city = gsub("\\b(town|city|CDP|village)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate)
city_pops_tx_2021 <- city_pops_tx_2021 %>%
rename(population = estimate) %>%
filter(city != "Mesquite" | population != 181) #Removing the second Mesquite, TX that is a CDP
brock_pop_2021 <- data.frame(city = "Brock", state = "TX", population = 5894) #obtained using school district because all players went to the same high school https://censusreporter.org/profiles/97000US4811460-brock-independent-school-district-tx/
cypress_pop_2021 <- data.frame(city = "Cypress", state = "TX", population = 88375) #obtained using zip code https://censusreporter.org/profiles/86000US77429-77429/
klein_pop_2021 <- data.frame(city = "Klein", state = "TX", population = 270168) #obtained using school district because all players went to the same high school https://censusreporter.org/profiles/97000US4825740-klein-independent-school-district-tx/
new_caney_pop_2021 <- data.frame(city = "New Caney", state = "TX", population = 29992) #obtained using zip code https://censusreporter.org/profiles/86000US77357-77357/
wall_pop_2021 <- data.frame(city = "Wall", state = "TX", population = 185) #obtained using zip code https://censusreporter.org/profiles/86000US76957-76957/
city_pops_tx_2021 <- bind_rows(city_pops_tx_2021, brock_pop_2021, cypress_pop_2021, klein_pop_2021, new_caney_pop_2021, wall_pop_2021)
#Join
hometowns_tx_complete <- distinct_hometowns_tx %>%
left_join(city_pops_tx_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(players_per_hundred_thousand = round((total_players*100000)/population,1)) %>%
arrange(desc(players_per_hundred_thousand))
#Add to SE
hometowns_se_complete <- bind_rows(hometowns_se_complete, hometowns_tx_complete) %>%
arrange(desc(players_per_hundred_thousand))
#Find and fix NA values
#hometowns_tx_complete %>%
#filter(is.na(population))
# CSV
write_csv(hometowns_se_complete, file = "hometowns_se.csv")
View(hometowns_se_complete)
View(football_rosters_usa)
View(football_rosters_se)
View(hometowns_open_refine)
View(hometowns_open_refine_modified)
View(football_rosters_usa)
View(football_rosters_se)
football_rosters_ga <- football_rosters_usa %>%
filter(hometown_state_clean == "GA")
View(football_rosters_ga)
View(state_pops_2021)
View(football_rosters_usa_states)
#Just checking something
check <- football_rosters_ga %>%
group_by(hometown_city_clean) %>%
summarise(total = n())
View(check)
#Just checking something
check <- football_rosters_ga %>%
group_by(hometown_city_clean) %>%
summarise(total = n()) %>%
arrange(hometown_city_clean)
View(hometowns_se_complete)
check2 <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA")
View(check2)
check2 <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA") %>%
group_by(hometown_city_clean) %>%
summarise(total = n()) %>%
arrange(hometown_city_clean)
View(hometowns_se_complete)
check2 <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA") %>%
group_by(hometown_city_clean) %>%
summarise(total = sum(total_players)) %>%
arrange(hometown_city_clean)
check_join <- check %>%
anti_join(check2, by = "hometown_city_clean")
View(check_join)
check_join <- check2 %>%
anti_join(check, by = "hometown_city_clean")
check_join <- check2 %>%
anti_join(check, by = "total")
anti_join(check, by = c("hometown_city_clean", "total")
check_join <- check2 %>%
anti_join(check, by = c("hometown_city_clean", "total"))
check_join <- check %>%
anti_join(check2, by = c("hometown_city_clean", "total"))
View(football_rosters_ga)
View(hometowns_se_complete)
hometowns_ga <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA")
View(hometowns_ga)
# Race?
race_ga_2021 <- get_acs(geography = "place",
variables = "B02001",
year = 2021,
state = "GA")
# Race?
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009",
year = 2021,
state = "GA")
# Race?
race_ga_2021 <- get_acs(geography = "state",
variables = "B02009",
year = 2021,
state = "GA")
# Race?
race_ga_2021 <- get_acs(geography = "state",
variables = "B02009_001",
year = 2021,
state = "GA")
View(race_ga_2021)
# Race?
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA")
# Load ACS crosswalk
ACS_2021 <- load_variables(2021, "acs5")
View(ACS_2021)
# Race?
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
# Race?
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
race_ga_2021 <- race_ga_2021 %>%
rename(black_population = estimate)
ellenwood_black_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", black_population = 35446) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_black_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", black_population = 85) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_black_pop_2021 <- data.frame(city = "Rex", state = "GA", black_population = 10926) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_black_pop_2021 <- data.frame(city = "Subligna", state = "GA", black_population = 0) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
race_ga_2021 <- bind_rows(race_ga_2021, ellenwood_black_pop_2021, rabun_black_pop_2021, rex_pop_2021, sublinga_pop_2021)
View(race_ga_2021)
# Race/Black population
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
race_ga_2021 <- race_ga_2021 %>%
rename(black_population = estimate)
ellenwood_black_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", black_population = 35446) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_black_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", black_population = 85) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_black_pop_2021 <- data.frame(city = "Rex", state = "GA", black_population = 10926) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_black_pop_2021 <- data.frame(city = "Subligna", state = "GA", black_population = 0) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
race_ga_2021 <- bind_rows(race_ga_2021, ellenwood_black_pop_2021, rabun_black_pop_2021, rex_black_pop_2021, sublinga_black_pop_2021)
View(hometowns_ga)
View(race_ga_2021)
#Join
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state"))
#Join
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = black_population/total_popuation)
hometowns_ga <- hometowns_ga %>%
mutate(pct_black = black_population/total_popuation)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = black_population/popuation)
football_rosters_ga <- football_rosters_usa %>%
filter(hometown_state_clean == "GA")
hometowns_ga <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA")
# Race/Black population
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
race_ga_2021 <- race_ga_2021 %>%
rename(black_population = estimate)
ellenwood_black_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", black_population = 35446) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_black_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", black_population = 85) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_black_pop_2021 <- data.frame(city = "Rex", state = "GA", black_population = 10926) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_black_pop_2021 <- data.frame(city = "Subligna", state = "GA", black_population = 0) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
race_ga_2021 <- bind_rows(race_ga_2021, ellenwood_black_pop_2021, rabun_black_pop_2021, rex_black_pop_2021, sublinga_black_pop_2021)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = black_population/popuation)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = black_population/popuation)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state"))
hometowns_ga <- hometowns_ga %>%
mutate(pct_black = black_population/popuation)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = black_population/population)
football_rosters_ga <- football_rosters_usa %>%
filter(hometown_state_clean == "GA")
hometowns_ga <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA")
# Race/Black population
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
# Race/Black population
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
race_ga_2021 <- race_ga_2021 %>%
rename(black_population = estimate)
ellenwood_black_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", black_population = 35446) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_black_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", black_population = 85) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_black_pop_2021 <- data.frame(city = "Rex", state = "GA", black_population = 10926) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_black_pop_2021 <- data.frame(city = "Subligna", state = "GA", black_population = 0) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
race_ga_2021 <- bind_rows(race_ga_2021, ellenwood_black_pop_2021, rabun_black_pop_2021, rex_black_pop_2021, sublinga_black_pop_2021)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = black_population/population)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = black_population/population*100)
football_rosters_ga <- football_rosters_usa %>%
filter(hometown_state_clean == "GA")
hometowns_ga <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA")
# Race/Black population
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
ellenwood_black_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", black_population = 35446) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_black_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", black_population = 85) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_black_pop_2021 <- data.frame(city = "Rex", state = "GA", black_population = 10926) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_black_pop_2021 <- data.frame(city = "Subligna", state = "GA", black_population = 0) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
race_ga_2021 <- bind_rows(race_ga_2021, ellenwood_black_pop_2021, rabun_black_pop_2021, rex_black_pop_2021, sublinga_black_pop_2021)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state"))
mutate(pct_black = round(black_population/population*100),1))
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = round(black_population/population*100),1))
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = round(black_population/population*100),1)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state")) %>%
mutate(pct_black = round(black_population/population*100, 1))
football_rosters_ga <- football_rosters_usa %>%
filter(hometown_state_clean == "GA")
hometowns_ga <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA")
# Race/Black population
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
race_ga_2021 <- race_ga_2021 %>%
rename(black_population = estimate)
ellenwood_black_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", black_population = 35446) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_black_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", black_population = 85) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_black_pop_2021 <- data.frame(city = "Rex", state = "GA", black_population = 10926) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_black_pop_2021 <- data.frame(city = "Subligna", state = "GA", black_population = 0) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
race_ga_2021 <- bind_rows(race_ga_2021, ellenwood_black_pop_2021, rabun_black_pop_2021, rex_black_pop_2021, sublinga_black_pop_2021)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state"))
hometowns_ga <- hometowns_ga %>%
mutate(pct_black = round(black_population/population*100, 1))
View(ACS_2021)
# Race/Black population
income_ga_2021 <- get_acs(geography = "place",
variables = "B19001A_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
View(income_ga_2021)
# Race/Black population
income_ga_2021 <- get_acs(geography = "place",
variables = "B19013A_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
# Race/Black population
income_ga_2021 <- get_acs(geography = "place",
variables = "B19013_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
income_ga_2021 <- income_ga_2021 %>%
rename(median_income = estimate)
ellenwood_income_2021 <- data.frame(city = "Ellenwood", state = "GA", median_income = 69876) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_income_2021 <- data.frame(city = "Rabun Gap", state = "GA", median_income = 65714) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_income_2021 <- data.frame(city = "Rex", state = "GA", median_income = 60180) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_income_2021 <- data.frame(city = "Subligna", state = "GA", median_income = 42813) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
income_ga_2021 <- bind_rows(income_ga_2021, ellenwood_income_2021, rabun_income_2021, rex_income_2021, sublinga_income_2021)
hometowns_ga <- hometowns_ga %>%
left_join(income_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state"))
# TAKING A BREAK FROM STATE CLEANING AND SEEING WHAT OTHER CENSUS INFO WE CAN GET ABOUT GA HOMETOWNS
football_rosters_ga <- football_rosters_usa %>%
filter(hometown_state_clean == "GA")
# We want final dataframe to have: hometown, population, number of players, players per population, Black pop, some measure of SES
hometowns_ga <- hometowns_se_complete %>%
filter(hometown_state_clean == "GA")
# Race/Black population
race_ga_2021 <- get_acs(geography = "place",
variables = "B02009_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
race_ga_2021 <- race_ga_2021 %>%
rename(black_population = estimate)
ellenwood_black_pop_2021 <- data.frame(city = "Ellenwood", state = "GA", black_population = 35446) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_black_pop_2021 <- data.frame(city = "Rabun Gap", state = "GA", black_population = 85) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_black_pop_2021 <- data.frame(city = "Rex", state = "GA", black_population = 10926) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_black_pop_2021 <- data.frame(city = "Subligna", state = "GA", black_population = 0) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
race_ga_2021 <- bind_rows(race_ga_2021, ellenwood_black_pop_2021, rabun_black_pop_2021, rex_black_pop_2021, sublinga_black_pop_2021)
hometowns_ga <- hometowns_ga %>%
left_join(race_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state"))
hometowns_ga <- hometowns_ga %>%
mutate(pct_black = round(black_population/population*100, 1))
# Income
income_ga_2021 <- get_acs(geography = "place",
variables = "B19013_001",
year = 2021,
state = "GA") %>%
clean_names() %>%
separate(name, into = c("city", "state"), sep = ", ", remove = FALSE) %>%
mutate(state = case_when(
state == 'Georgia' ~ "GA")) %>%
mutate(city = gsub("\\b(town|city|CDP)\\b", "", city)) %>%
mutate(city = str_squish(city)) %>%
select(city, state, estimate) %>%
mutate(city = case_when(
city == 'Athens-Clarke County unified government (balance)' ~ "Athens",
city == 'Macon-Bibb County' ~ "Macon",
city == 'McRae-Helena' ~ 'McRae',
TRUE ~ city))
income_ga_2021 <- income_ga_2021 %>%
rename(median_income = estimate)
ellenwood_income_2021 <- data.frame(city = "Ellenwood", state = "GA", median_income = 69876) #obtained using zip code from https://censusreporter.org/profiles/86000US30294-30294/
rabun_income_2021 <- data.frame(city = "Rabun Gap", state = "GA", median_income = 65714) #obtained using zip code from https://censusreporter.org/profiles/86000US30568-30568/
rex_income_2021 <- data.frame(city = "Rex", state = "GA", median_income = 60180) #obtained using zip code from https://censusreporter.org/profiles/86000US30273-30273/
sublinga_income_2021 <- data.frame(city = "Subligna", state = "GA", median_income = 42813) #obtained using block group from https://censusreporter.org/profiles/15000US130550101002-bg-2-tract-101-chattooga-ga/
income_ga_2021 <- bind_rows(income_ga_2021, ellenwood_income_2021, rabun_income_2021, rex_income_2021, sublinga_income_2021)
hometowns_ga <- hometowns_ga %>%
left_join(income_ga_2021, by = c("hometown_city_clean" = "city", "hometown_state_clean" = "state"))
# CSV
write_csv(hometowns_ga, file = "hometowns_ga.csv")
# Georgia, but just hometowns that have produced at least 3 players
hometowns_ga_3plus <- hometowns_ga %>%
filter(total_players >= 3)
View(hometowns_ga_3plus)
# CSV
write_csv(hometowns_ga_3plus, file = "hometowns_ga_3plus.csv")
